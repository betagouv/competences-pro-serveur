# frozen_string_literal: true

panel t('.informations_specifiques') do
  attributes_table_for resource do
    row t('.ouverture_contenant'), &:nombre_ouverture_contenant
    row t('.nombre_essais_validation'),
        &:nombre_essais_validation
  end
end

panel t('.restitution_essais') do
  table_for evaluation.essais do
    nombre_essais = 0
    column('') { |_e| "Essai #{nombre_essais += 1}" }
    column t('admin.evaluations.evaluation.etat') do |essai|
      if essai.reussite?
        status_tag t('admin.evaluations.evaluation.reussite'), class: 'green'
      elsif essai.abandon?
        status_tag t('admin.evaluations.evaluation.abandon'), class: 'red'
      elsif essai.en_cours?
        status_tag t('admin.evaluations.evaluation.en_cours')
      else
        status_tag t('admin.evaluations.evaluation.echec'), class: 'red'
      end
    end
    column t('admin.evaluations.evaluation.temps') do |essai|
      "+#{distance_of_time_in_words(essai.temps_total)}"
    end
    column t('.ouverture_contenant'), &:nombre_ouverture_contenant
  end
end
