# frozen_string_literal: true

panel 'Détails de la campagne' do
  attributes_table_for campagne do
    row :id
    row :libelle
    row :code
    row :questionnaire
    row :compte if can?(:manage, Compte)
    row :created_at
  end
end

panel 'Configuration' do
  reorderable_table_for campagne.situations_configurations.includes(:situation) do
    column :situation
  end
end

columns do
  column do
    panel 'Évaluations' do
      link_to "Consulter les #{resource.nombre_evaluations} évaluations",
              admin_campagne_evaluations_path(resource)
    end
  end
  column do
    panel 'Statistiques' do
      link_to 'Consulter les stats', admin_campagne_stats_path(q: { campagne_id_eq: resource.id })
    end
  end
end
