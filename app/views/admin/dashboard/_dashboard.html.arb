# frozen_string_literal: true

columns do
  column do
    render 'evaluations', evaluations: evaluations if evaluations.present?
  end

  column do
    panel t('.contacts.titre') do
      h4 class: 'mise-en-evidence' do
        t('.contacts.intro')
      end
      render 'admin/contacts/form'
      if contacts.present?
        hr
        h4 t('.contacts.deja_enregistres')
        ul do
          contacts.each do |contact|
            li contact.display_name
          end
        end
      end
    end
  end
end

render 'actualites', actualites: actualites if actualites.present?

if can?(:manage, Compte)
  panel t('.statistiques.titre') do
    text_node %(<iframe
      src="https://metabase.eva.beta.gouv.fr/public/dashboard/f9549f07-b9a1-4fe7-8961-2a127bf27d22"
      frameborder="0"
      width="100%"
      height="600"
      allowtransparency
    ></iframe>).html_safe
  end
end
